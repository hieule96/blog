{{- $page := .page }}
{{- $isHidden := .isHidden | default false }}

<article data-categories="{{ with .page.Params.categories }}{{ range . }}{{ . | lower }} {{ end }}{{ end }}"
    class="post-card group relative overflow-hidden rounded-xl border border-slate-200 bg-white transition-all hover:border-primary/50 hover:shadow-lg hover:shadow-primary/5 dark:border-slate-800 dark:bg-[#15202b]">
    <div
        class="flex flex-col {{ if and (not $isHidden) $page.Params.cover.image }}md:flex-row md:items-stretch{{ end }}">
        <div class="flex flex-1 flex-col justify-between p-6">
            <div class="flex flex-col gap-3">
                <!-- Meta info -->
                <div class="flex items-center gap-3 text-xs font-medium font-mono">
                    <span class="text-primary">// {{ $page.Date.Format "2006-01-02" }}</span>
                    {{- with $page.Params.categories }}
                    {{- range first 1 . }}
                    <span class="text-slate-400 dark:text-slate-500">â€¢</span>
                    <span
                        class="rounded bg-slate-100 px-2 py-0.5 text-slate-600 dark:bg-slate-800 dark:text-slate-300">{{
                        . }}</span>
                    {{- end }}
                    {{- end }}
                </div>


                <!-- Title -->
                <a class="block" href="{{ $page.Permalink }}">
                    <h3
                        class="text-xl font-bold leading-tight text-slate-900 group-hover:text-primary dark:text-white md:text-2xl">
                        {{ $page.Title }}
                    </h3>
                </a>

                <!-- Summary -->
                <p class="line-clamp-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400">
                    {{ $page.Summary | plainify | truncate 200 }}
                </p>
            </div>

            <!-- Read link -->
            <div class="mt-6 flex items-center">
                <a class="flex items-center gap-2 text-sm font-semibold text-primary hover:text-blue-400"
                    href="{{ $page.Permalink }}">
                    Read Log <span class="material-symbols-outlined text-base">arrow_forward</span>
                </a>
            </div>
        </div>

        {{- if and (not $isHidden) $page.Params.cover.image }}
        <!-- Cover Image -->
        <div class="h-48 w-full md:h-auto md:w-72 bg-slate-200 dark:bg-slate-800 relative overflow-hidden">
            <div class="absolute inset-0 bg-cover bg-center transition-transform duration-500 group-hover:scale-105"
                style="background-image: url('{{ $page.Params.cover.image }}');"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent md:bg-gradient-to-l"></div>
        </div>
        {{- end }}
    </div>
</article>